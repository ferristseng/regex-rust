from cases import *
from datetime import datetime

FILE = open('benchmark/benches/cpp_bench.cpp', 'w')

OUTPUT = """
// This is an auto-generated test file
// Generated by benchmark/rust_bench_generator.py
//
// Last Modified: %s

#include <regex>

using namespace std;

void execute (string reg, string text) {
  regex test(reg);

  regex_match(text, test);
  return;
}

int main(){
  for (int i = 0; i < %s; i++) {

    %s

  }

}

"""

TEST_FN = \
"""
      execute(\"%s\", \"%s\");"""

if __name__ == "__main__":
  date = datetime.today().strftime("%B %d %Y %I:%M%p")
  buf = ""

  for (i, test) in enumerate(TESTS):
    buf += TEST_FN % (test[0], test[1])

  FILE.write(OUTPUT % (date, NO_LOOPS, buf))


  print("Successfully generated test file: benchmark/benches/cpp_bench.rs")
